---
name: ui-development
description: Use this skill whenever the user asks to create, modify, or debug UI, HUD, or Screens in the Minecraft mod. It contains rules and best practices for scaling, rendering, and architecture of UI elements.
---

# UI Development Skill for Minecraft Mod (Fabric 1.20.1)

Этот скилл содержит набор жестких правил и лучших практик для разработки пользовательского интерфейса (UI), HUD'ов и экранов (`Screen`) в модах для Minecraft 1.20.1.

Главная цель — создать красивый, адаптивный и производительный интерфейс, который не ломается при изменении размера окна или "Масштаба интерфейса" (GUI Scale).

## Основные правила (Должны соблюдаться всегда!)

### 1. Адаптивность и Масштабирование
* **НИКАКИХ хардкодных абсолютных координат.** Игрок может изменить размер окна или GUI Scale (от 1 до 4 или Auto). Хардкодные координаты неизбежно приведут к наслаиванию элементов или их уходу за пределы экрана.
* Для отрисовки экрана используйте переменные `this.width` и `this.height` как отправные точки.
* Для центрирования элемента по горизонтали используйте формулу: `(this.width - elementWidth) / 2`.
* Для центрирования по вертикали: `(this.height - elementHeight) / 2`.
* Привязывайте элементы к краям экрана или к центру, добавляя относительные отступы (margin/padding).

### 2. Использование DrawContext
В Minecraft 1.20+ вся отрисовка осуществляется через `DrawContext context` (заменил старый `MatrixStack`).
* Отрисовка текстур: `context.drawTexture(...)`.
* Отрисовка текста: `context.drawText(...)` или `context.drawTextWithShadow(...)`. Делайте отступы для текста, чтобы он не прилипал к краям плашек.
* Отрисовка прямоугольников/фонов: `context.fill(...)` или метод `drawGradient(...)`.
* Всплывающие подсказки (Tooltips): `context.drawTooltip(...)`. Они рисуются в последнюю очередь (сверху всего остального), чтобы не перекрываться другими окнами.

### 3. Наслоение (Z-Index)
Порядок вызовов методов рендера очень важен. То, что вызывается позже, рисуется *поверх* предыдущего.
* **Идеальный порядок рендера (снизу вверх):**
  1. Затемнение основного фона (если это `Screen`): `this.renderBackground(context)`.
  2. Подложки/Фоны интерфейса (главная текстура плашек).
  3. Декоративные элементы (иконки, прогресс-бары, полоски разделителей).
  4. Интерактивные элементы (кнопки, их ховер-эффекты).
  5. Текст (заголовки, значения статов).
  6. В самом конце метода `render()` — Tooltips (всплывающие подсказки), чтобы они были поверх ВСЕГО.

### 4. Интерактивные элементы и Hover-эффекты
* Интерфейс должен ощущаться "живым".
* Реализуйте затемнение или подсвечивание кнопок и плашек при наведении мыши (isHovered).
* Вычисляйте логику hover: `mouseX >= x && mouseX <= x + width && mouseY >= y && mouseY <= y + height`.

### 5. Сеть и разделение логики (Client vs Server)
* **Никогда не доверяйте клиенту!** UI — это клиентская сущность. Если в UI есть кнопка "Прокачать навык", она не должна менять статистику напрямую в клиенте.
* Кнопка должна отправлять **C2S (Client-to-Server) пакет** с запросом на прокачку.
* Сервер проверяет логику (хватает ли очков/ресурсов), прокачивает навык, и затем отправляет **S2C пакет** обратно клиенту или использует систему синхронизации для обновления визуала.

### 6. Эстетика и Дизайн (Требования пользователя)
* Использовать нестандартный дизайн (кастомные текстуры GUI вместо дефолтных серых квадратов Minecraft, если не указано иное).
* Использовать красивые полупрозрачные фоны (черный с альфа-каналом) для всплывающих элементов.
* Рисовать красивые индикаторы/прогресс-бары (например, полоса маны с градиентом или разной текстурой).

### Шаблон применения:
При создании или обновлении UI всегда думайте:
- *Как этот элемент будет выглядеть при GUI Scale 3? Не уедет ли кнопка за экран?*
- *Правильно ли я центрирую фон?*
- *Где рисуется подсказка (в конце или нет)?*
